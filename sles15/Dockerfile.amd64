FROM invent-registry.kde.org/sysadmin/ci-images/sles15-craft@sha256:6bbddd33b1814507213f26df12752d7a024699696993ab2ec2d774c9aa7e0146

# using a non root user doesn't work with drone ðŸ’–
# https://stackoverflow.com/a/50613378
USER root


RUN zypper --non-interactive update && \
    zypper --non-interactive install \
    # rpm
    popt-devel file-devel \
    # dpkg
    libmd-devel  ncurses-devel \
    && \
    # cleanup to ensure we don't leave behind anything that doesn't need to be in the image
    zypper --non-interactive clean -a

# the code is checked out on the host so the user will be different
RUN git config --system --add safe.directory '*'
